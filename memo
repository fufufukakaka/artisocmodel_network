-- Crossing
for cr in 1 .. 10
LOOP
crossrate = random();
ttt = round(random()*3 + 1);
if crossrate >= 0.8 then
	select gene1 into g1 from randtable where eid = (2*cr - 1);
	select gene2 into g2 from randtable where eid = (2*cr - 1);
	select gene3 into g3 from randtable where eid = (2*cr - 1);
	select gene4 into g4 from randtable where eid = (2*cr - 1);
	select gene1 into g5 from randtable where eid = 2*cr;
	select gene2 into g6 from randtable where eid = 2*cr;
	select gene3 into g7 from randtable where eid = 2*cr;
	select gene4 into g8 from randtable where eid = 2*cr;
	UPDATE randtable set newsons = (g1 || g2 || g3 || g4) where eid = (2*cr - 1);
	UPDATE randtable set newsons = (g5 || g6 || g6 || g8) where eid = 2*cr;
else
-- tttが該当する部分の遺伝子をまず入れ替える
    select (gene || ttt) into (g || ttt) from randtable where eid = 2*cr;
    select (gene || ttt) from into (g || ttt + 4) randtable where eid = 2*cr - 1;
-- tttより前の遺伝子はそのままで、以降の遺伝子は全て入れ替える
if ttt >= 3 then
for i in 1 .. (ttt - 1)
LOOP
    select (gene )

END LOOP;
else

end if;
end if;
end loop;